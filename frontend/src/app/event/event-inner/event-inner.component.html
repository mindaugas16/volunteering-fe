<div class="container" *ngIf="event">
  <div class="columns mt-4 mb-4">
    <div class="column is-two-thirds">
      <div class="is-flex align-items-center">
        <app-logo [imagePath]="event.imagePath"></app-logo>
        <div>
          <h1 class="title">
            About {{event.title}}
          </h1>
          <h2>
            {{event.description}}
          </h2>
        </div>
      </div>
      <hr/>

      <div>
        <div class="is-flex align-items-center justify-content-between">
          <h4 class="title is-4">
            {{'Activities'}}
          </h4>
          <a class="icon"
             [routerLink]="['activities']"
          >
            <i class="fa fa-plus"></i>
          </a>
        </div>
        <div>
          <div class="box"
               *ngFor="let activity of event.activities"
          >
            <article class="media">
              <div class="media-left">
                <figure class="image is-64x64">
                  <img src="https://bulma.io/images/placeholders/128x128.png" alt="Image">
                </figure>
              </div>
              <div class="media-content">
                <div class="content">
                  <div class="is-flex justify-content-between">
                    <h4 class="title is-5 mb-0">
                      {{activity.name}}
                    </h4>
                    <time class="is-italic">
                      {{event.date.start | date}} - {{event.date.end| date}}
                    </time>
                  </div>
                  <p>
                    {{activity.description}}
                  </p>
                </div>
                <nav class="level is-mobile">
                  <div class="level-left">
                    <a class="level-item" aria-label="reply">
                      <span class="icon is-small">
                        <i class="fa fa-reply" aria-hidden="true"></i>
                      </span>
                    </a>
                    <a class="level-item" aria-label="retweet">
                      <span class="icon is-small">
                        <i class="fa fa-retweet" aria-hidden="true"></i>
                      </span>
                    </a>
                    <a class="level-item" aria-label="like">
                      <span class="icon is-small">
                        <i class="fa fa-heart" aria-hidden="true"></i>
                      </span>
                    </a>
                  </div>
                </nav>
              </div>
            </article>
          </div>
        </div>
      </div>
    </div>
    <div class="column">
      <div class="box is-shadowless">
        <a (click)="onEditDetails()">
          <i class="fa fa-pencil" aria-hidden="true"></i>
          <span>
            {{'Edit details'}}
          </span>
        </a>
      </div>
      <div class="box">
        <h4 class="title is-4">
          <span class="icon mr-2">
            <i class="fa fa-info"></i>
          </span>
          About organization
        </h4>
        <a [routerLink]="['/organizations', 'details', event.organization._id]">
          {{event.organization.name}}
        </a>
      </div>
      <div class="box">
        <h4 class="title is-4">
          <span class="icon mr-2">
            <i class="fa fa-calendar"></i>
          </span>
          Event date
        </h4>
        Start: {{event.date?.start | date}}<br/>
        End: {{event.date?.end | date}}
      </div>

      <div class="box">
        <h4 class="title is-4">
          <span class="icon mr-2">
            <i class="fa fa-location-arrow"></i>
          </span>
          Location
        </h4>
        <span>
          {{'Address'}}: {{event.location?.address}}, {{event.location?.city}} {{event.location?.country}}
        </span>
      </div>

      <div class="box">
        <div class="is-flex justify-content-between">
          <h4 class="title is-4">
            <span class="icon mr-2">
              <i class="fa fa-hashtag"></i>
            </span>
            Tags
          </h4>
          <div>
            <span class="icon"
                  *ngIf="event.tags && event.tags.length"
                  (click)="isTagsEditEnabled ? onSaveTags() : null; isTagsEditEnabled = !isTagsEditEnabled"
            >
              <i class="fa"
                 [ngClass]="[isTagsEditEnabled ? 'fa-check has-text-success' : 'fa-pencil']"
              ></i>
            </span>
            <span class="icon ml-2"
                  *ngIf="isTagsEditEnabled"
            >
              <i class="fa fa-undo"></i>
            </span>
          </div>
        </div>
        <div class="is-flex flex-wrap">
          <div class="tags is-medium" *ngIf="event.tags && event.tags.length; else noTags">
            <app-tag *ngFor="let tag of event.tags"
                     [tag]="tag"
                     [isTagsEditEnabled]="isTagsEditEnabled"
                     (delete)="onDeleteTag($event)"
                     (rename)="onRenameTag($event)"
            ></app-tag>
            <span class="tag is-primary"
                  (click)="onAddTag()"
            >
              <span class="icon">
                <i class="fa fa-plus"></i>
              </span>
            </span>
          </div>

          <ng-template #noTags>
            <a class="is-link" [routerLink]="'/'">
              {{'Add new tag'}}
            </a>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</div>
