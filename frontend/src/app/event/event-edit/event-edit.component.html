<app-generic-modal>
  <ng-template appModalContent>

    <h2 class="title">
      {{event ? 'Edit event' : 'Create new event'}}
    </h2>
    <hr/>
    <form [formGroup]="form">
      <app-input class="field"
                 type="text"
                 formControlName="title"
                 [formControl]="form.get('title')"
                 placeholder="Title"
                 label="Title"
      ></app-input>

      <app-input class="field"
                 type="text"
                 formControlName="description"
                 fieldType="textarea"
                 [formControl]="form.get('description')"
                 placeholder="Description"
                 label="Description"
      ></app-input>


      <div class="field" *ngIf="!event">
        <div class="control" *ngIf="!image; else imagePreview">
          <div class="file has-name is-fullwidth">
            <label class="file-label">
              <input class="file-input"
                     type="file"
                     (change)="onFileChange($event)"
              >
              <span class="file-cta">
                <span class="file-icon">
                  <i class="fa fa-upload"></i>
                </span>
                <span class="file-label">
                  Choose a fileâ€¦
                </span>
              </span>
              <span class="file-name">
                Screen Shot 2017-07-29 at 15.54.25.png
              </span>
            </label>
          </div>
        </div>
        <ng-template #imagePreview>
          <img class="is-3by4 is-rounded" [src]="image"/>
        </ng-template>
      </div>
      <div class="field">
        <div class="control">
          <label class="label">
            {{'Event date'}}
          </label>
        <app-date-range-picker [dateRange]="event?.date"
                               (dateSelect)="onDateSelect($event)"
        ></app-date-range-picker>
        </div>
      </div>
      <div formGroupName="location">
        <h4 class="title is-5">
          {{'Location info'}}
        </h4>
        <app-input class="field"
                   type="text"
                   formControlName="title"
                   [formControl]="form.get('location').get('title')"
                   placeholder="Title"
                   label="Title"
        ></app-input>
        <app-input class="field"
                   type="text"
                   formControlName="address"
                   [formControl]="form.get('location').get('address')"
                   placeholder="Address"
                   label="Address"
        ></app-input>
        <app-input class="field"
                   type="text"
                   formControlName="address2"
                   [formControl]="form.get('location').get('address2')"
                   placeholder="Address 2"
                   label="Address 2"
        ></app-input>
        <div class="columns">
        <app-input class="field column is-half m-0"
                   type="text"
                   formControlName="city"
                   [formControl]="form.get('location').get('city')"
                   placeholder="City"
                   label="City"
        ></app-input>
        <app-input class="field column is-half m-0"
                   type="text"
                   formControlName="country"
                   [formControl]="form.get('location').get('country')"
                   placeholder="Country"
                   label="Country"
        ></app-input>
        </div>
        <app-input class="field"
                   type="number"
                   formControlName="zipCode"
                   [formControl]="form.get('location').get('zipCode')"
                   placeholder="Zip Code"
                   label="Zip Code"
        ></app-input>
      </div>
      <hr/>
      <div class="field is-grouped is-grouped-right">
        <div class="control">
          <button class="button is-link"
                  type="submit"
                  (click)="onSubmit()"
          >
            {{'COMMON.SAVE' | translate}}
          </button>
        </div>
        <div class="control">
          <button class="button is-text"
                  (click)="onCloseModal()"
          >
            {{'COMMON.CANCEL' | translate}}
          </button>
        </div>
      </div>
    </form>
  </ng-template>
</app-generic-modal>
